PROJECT_NAME := cms_development
service ?=

up:
	@docker compose -p $(PROJECT_NAME) up -d --timestamps --wait

down:
	@docker compose -p $(PROJECT_NAME) down

ps:
	@docker compose -p $(PROJECT_NAME) ps

logs:
ifndef service
	@docker compose -p $(PROJECT_NAME) logs --tail=100
else
	echo "ğŸ“œ $(service)ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°ã‚’è¡¨ç¤ºä¸­...";
	@docker compose -p $(PROJECT_NAME) logs --tail=100 $(service)
endif

exec:
ifndef service
	@echo "â— serviceã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚ä¾‹: make exec service=backend"
else
	@docker compose -p $(PROJECT_NAME) exec $(service) sh
endif

restart:
ifndef service
	@echo "ğŸ”„ ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’å†èµ·å‹•ä¸­..."
	@docker compose -p $(PROJECT_NAME) restart
else
	@echo "ğŸ”„ $(service)ã‚µãƒ¼ãƒ“ã‚¹ã‚’å†èµ·å‹•ä¸­..."
	@docker compose -p $(PROJECT_NAME) restart $(service)
endif

.PHONY: up down ps logs exec restart