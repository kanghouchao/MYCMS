# Backend Docker Makefile
# ======================

# å˜é‡å®šä¹‰
DOCKER_IMAGE = cms-backend
DOCKER_TAG = latest

# é»˜è®¤ç›®æ ‡
.DEFAULT_GOAL := help

# ======================
# å¸®åŠ©ä¿¡æ¯
# ======================
help: ## æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
	@echo "å¯ç”¨å‘½ä»¤:"
	@awk 'BEGIN {FS = ":.*?## "} /^[a-zA-Z_-]+:.*?## / {printf "  \033[36m%-15s\033[0m %s\n", $$1, $$2}' $(MAKEFILE_LIST)

# ======================
# Docker é•œåƒç®¡ç†
# ======================
build: ## æ„å»ºDockeré•œåƒ
	@echo "ğŸ—ï¸  æ„å»ºDockeré•œåƒ..."
	@docker build -t $(DOCKER_IMAGE):$(DOCKER_TAG) .

rmi: ## åˆ é™¤Dockeré•œåƒ
	@echo "ğŸ—‘ï¸  åˆ é™¤Dockeré•œåƒ..."
	@docker rmi $(DOCKER_IMAGE):$(DOCKER_TAG) 2>/dev/null || echo "é•œåƒä¸å­˜åœ¨æˆ–å·²åˆ é™¤"

.PHONY: help build rmi
